<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>{% block title %}Profile{% endblock %}</title>

    {% block stylesheets %}
        <link rel="stylesheet" href="{{ asset('node_modules/bootstrap/dist/css/bootstrap.min.css') }}">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-vue/dist/bootstrap-vue.min.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
              integrity="sha512-WioNl04ed+Fk1mrlyIk60yrRw2S8hd5gaxJF/m5yvX9q3k8Mpt7aduOTWeJzvFAVWZXP8mliv7VcOGYlLb6Vg=="
              crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="{{ asset('css/style.css') }}">
    {% endblock %}


    {% block javascripts %}
        {{ encore_entry_script_tags('app') }}
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap-vue/dist/bootstrap-vue.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

    {% endblock %}
</head>

<body>
{% block body %}

    <header>
        <nav class="navbar navbar-dark bg-dark " >
            <div class="container-fluid">
                <a class="navbar-brand" href="/home">LASXDOU</a>
                <button
                        class="navbar-toggler"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#navbarNavAltMarkup"
                        aria-controls="navbarNavAltMarkup"
                        aria-expanded="false"
                        aria-label="Toggle navigation"
                >
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
                    </svg>


                </button>
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                    <div class="navbar-nav">
                        {% if app.user %}
                            <a class="nav-link" href="/Profil.html">Profile</a>
                        {% else %}
                            <a class="nav-link" href="/Login.html">Login</a>
                        {% endif %}
                        <a class="nav-link active" aria-current="page" href="/Home.html"
                        >Page d'accueil</a
                        >
                        <a class="nav-link" href="/Bet.html">Lancer un pari</a>
                        <a class="nav-link" href="/WinnerPage.html">Voir les paris gagnés</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    <main style="padding: 3vh 1vw ;padding-bottom: 10vh;min-height: 100vh;">
        <div class="container-fluid">
            <div class="row " role="tabpanel">
                <!-- List group -->
                <div class="list-group col-4" id="myList" role="tablist">
                    <a class="list-group-item list-group-item-action " data-toggle="list" href="#Vue_ensemble"
                       role="tab">Vue d'ensemble du compte</a>
                    <a class="list-group-item list-group-item-action " data-toggle="list" href="#Modifier_profile"
                       role="tab">Modifier profil</a>
                    <a class="list-group-item list-group-item-action active" data-bs-toggle="list" href="#ChangerMDP" role="tab">Mot de passe</a>
                    <a class="list-group-item list-group-item-action" data-bs-toggle="list" href="#Deconnexion"
                       role="tab">Deconnexion</a>
                    <!--<a class="list-group-item list-group-item-action" data-bs-toggle="list" href="#RechargeSolde"
                       role="tab">Solde</a>-->
                </div>
                <!-- Tab panes -->
                <div class="tab-content col-8">
                    <div class="tab-pane " id="Vue_ensemble" role="tabpanel">
                        <h1>Vue d'ensemble du compte</h1>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">Nom d'utilisateur: {{ user.Username }}</li>
                            <li class="list-group-item">Adresse e-mail: {{ user.Login }}</li>
                            <li class="list-group-item">Date de naissance: {{ user.getDateNaissance()|date('d/m/Y')}}</li>
                            <li class="list-group-item">Numero Telephone: {{ user.getNumeroTelephone() }} </li>


                            <li class="list-group-item">
                                <p>Liste des anciens bets</p>
                                <div class="accordion" id="accordionExample">
                                    {% for pari in paris %}
                                        <div class="accordion-item">
                                            <h2 class="accordion-header">
                                                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                                        data-bs-target="#collapse{{ pari.id }}" aria-expanded="true" aria-controls="collapse{{ pari.id }}">
                                                    Bet Number {{ pari.id }}, {{ pari.getDateCreation()|date('d/m/Y') }}, {{ pari.resultat }}
                                                </button>
                                            </h2>
                                            <div id="collapse{{ pari.id }}" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
                                                <div class="accordion-body">
                                                    <strong>This is the Bet Number {{ pari.id }} Matches:</strong>
                                                    {% for parisingulier in repository.findByPariId(pari.id) %}


                                                        <p>{{parisingulier.getPariSingulierDetails()}}</p>
                                                    {% endfor %}
                                                    <p>Montant parié :{{ pari.getMontantParie() }}Dt</p>
                                                    <p>Montant gagné en cas de gain : {{ pari.getMontantParie() }}*{{ repository.getTotalOdds(pari.id)}}Dt</p>
                                                </div>
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="tab-pane active " id="ChangerMDP" role="tabpanel">
                        <h1>Changer Mot de Passe</h1>

                        {{ form_start(Passwordform) }}

                        {{ form_row(Passwordform.oldPassword) }}
                        {{ form_errors(Passwordform.oldPassword) }}

                        {{ form_row(Passwordform.newPassword) }}
                        {{ form_errors(Passwordform.newPassword) }}

                        {{ form_row(Passwordform.confirmNewPassword) }}
                        {{ form_errors(Passwordform.confirmNewPassword) }}
                        <div class="alert alert-danger" role="alert">
                            {{ message }}
                        </div>
                        {{ form_rest(Passwordform) }}
                    </div>
                    <div class="tab-pane" id="Modifier_profile" role="tabpanel">
                        <h1>Modifier Profile</h1>
                        {{ form(form) }}
                    </div>
                    <div class="tab-pane " id="Deconnexion" role="tabpanel">
                        <h1>Deconnexion</h1>
                        <a href="{{ path('delete_session') }}">Logout</a>
                    </div>
                </div>
            </div>
        </div>
    </main>
{% endblock %}
</body>
<script src="{{ asset('node_modules/bootstrap/dist/js/bootstrap.min.js') }}"></script>
<script>
    function alerte()
    {
        alert("{{ message }}");
    }
</script>
</html>